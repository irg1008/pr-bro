---
import BaseLayout from "@/layouts/BaseLayout.astro";
import type { RoutineGroup } from "prisma/generated/client";
import {
	HomePageWrapper,
	type RoutineWithExercises,
} from "../components/HomePageWrapper";
import { GET } from "./api/home";

const response = await GET(Astro);
const data: {
	activeGroup: RoutineGroup | null;
	nextRoutine: RoutineWithExercises | null;
} = await response.json();
const { activeGroup, nextRoutine } = data;
---

<BaseLayout title={"Gym Tracker"}>
	<div class="container mx-auto px-4">
		<HomePageWrapper
			client:load
			activeGroupName={activeGroup?.name || null}
			nextRoutine={nextRoutine}
		/>
	</div>
</BaseLayout>
